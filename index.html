<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Food Logger</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<header class="topbar">
  <div class="left">
    <button onclick="exportData()" title="Export">â¬‡ï¸</button>
    <button title="Import" onclick="this.querySelector('input').click()">
      â¬†ï¸<input type="file" hidden onchange="importData(this)">
    </button>
  </div>
  <div class="right">
    <button onclick="showPanel('plot')">ğŸ“Š</button>
    <button onclick="showPanel('data')">ğŸ—‚ï¸</button>
    <button onclick="showPanel('add')">â•</button>
  </div>
</header>

<main class="panels">

  <!-- PLOT PANEL -->
  <section class="panel" id="panel-plot">
    <h2>Timeline</h2>
    <canvas id="plot" width="360" height="240"></canvas>
  </section>

  <!-- DATA PANEL -->
  <section class="panel" id="panel-data" hidden>
    <h2>Database</h2>
    <label id="databaseStatus">Database statusâ€¦</label><br><br>
    <div class="table-wrap">
      <table id="dataTable">
        <thead>
          <tr>
            <th>Date</th>
            <th>Text</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <!-- ADD PANEL -->
  <section class="panel" id="panel-add" hidden>
    <h2>Add entry</h2>

    <label>Date and time</label>
    <input type="datetime-local" id="dt">

    <label>Text</label>
    <div class="input-row">
      <input
        type="text"
        id="textNewEntry"
        placeholder="comma separated text"
        onfocus="this.setSelectionRange(this.value.length, this.value.length)"
      >
      <button class="clear-btn" onclick="text.value=''">Ã—</button>
      <button class="primary" onclick="addEntry()">Save</button>
      <button class="secondary" id="discardBtn" onclick="discardEdit()" hidden>Discard</button>
    </div>
    
    <div class="input-row">
      <input
        type="text"
        id="quickFilter"
        placeholder="quick buttons filter ..."
        oninput="updateQuickButtons()"
      >
      <button class="clear-btn" onclick="
        this.previousElementSibling.value='';
        updateQuickButtons();
      ">Ã—</button>
    </div>

    <div id="quickButtons" class="quick-buttons"></div>
  </section>

</main>

<footer id="appVersionFooter">Last update: 2025-12-25 12:59</footer>

<script src="js/db.js"></script>
<script src="js/plot.js"></script>
<script src="js/app.js"></script>

<script>
function showPanel(name) {
  document.querySelectorAll('.panel').forEach(p => p.hidden = true);
  document.getElementById('panel-' + name).hidden = false;
}
</script>

</body>
</html>
